#!/usr/bin/env php
<?php

declare(strict_types=1);

use Gacela\CodeGenerator\CodeGeneratorFactory;
use Gacela\Framework\Config;
use Symfony\Component\Console\Application;

$cwd = getcwd();
if (!file_exists($autoloadPath = $cwd . '/vendor/autoload.php')) {
    exit("Cannot load composer's autoload file: " . $autoloadPath);
}

require $autoloadPath;

Config::getInstance()->setApplicationRootDir($cwd);

$codeGeneratorFactory = new CodeGeneratorFactory();

$application = new Application();
$application->add($codeGeneratorFactory->createMakerFileCommand());
$application->add($codeGeneratorFactory->createMakerModuleCommand());
$application->run();

